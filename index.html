<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Online Shop</title>
    <!-- PayPal JavaScript SDK -->
    <script src="https://www.paypal.com/sdk/js?client-id=AUd1e9gGnKnAgp1UN4ngGuGw6EqgLiqvmXdISqqzKinIgOFq7vaOXWhQ7eB-veqJrwM0Kq4A5nfyCakh"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f5f5f5;
            background-image: url('https://www.toptal.com/designers/subtlepatterns/uploads/fancy-cushion.png'); /* Add your background pattern/image */
            background-size: cover;
            background-repeat: repeat;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: rgba(255, 255, 255, 0.9); /* Add some transparency to the container */
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            position: relative; /* Position for the decal */
        }

        h1 {
            color: #333;
            text-align: center;
        }

        /* Decal styles */
        .decal {
            position: absolute;
            top: 10px;
            left: 10px;
            z-index: 1;
        }

        .decal img {
            width: 100px; /* Adjust size as needed */
            height: auto;
        }

        /* Product Listing */
        .product-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        /* Product styles */
        .product {
            border: 1px solid #ccc;
            border-radius: 10px;
            overflow: hidden;
            transition: transform 0.3s ease;
            background-color: #fff;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        .product:hover {
            transform: translateY(-5px);
        }

        .product img {
            width: 100%;
            height: auto;
            border-bottom: 1px solid #ccc;
            border-radius: 10px 10px 0 0;
        }

        .product .info {
            padding: 20px;
        }

        .product h2 {
            margin: 0;
            font-size: 1.2em;
            color: #333;
        }

        .product p {
            margin: 10px 0;
            color: #666;
        }

        .product button {
            display: block;
            width: 100%;
            padding: 10px;
            background-color: #007bff;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .product button:hover {
            background-color: #0056b3;
        }

        /* Cart styles */
        .cart {
            border: 1px solid #ccc;
            border-radius: 10px;
            background-color: rgba(255, 255, 255, 0.9); /* Add some transparency to the cart */
            margin-top: 20px;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        .cart h2 {
            margin-top: 0;
            color: #333;
        }

        .cart ul {
            list-style-type: none;
            padding: 0;
            margin: 0;
        }

        .cart li {
            padding: 10px 0;
            border-bottom: 1px solid #ccc;
        }

        .cart li:last-child {
            border-bottom: none;
        }

        .checkout-btn {
            display: block;
            width: 100%;
            padding: 10px;
            background-color: #28a745;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
            margin-top: 20px;
        }

        .checkout-btn:hover {
            background-color: #218838;
        }

        /* Hide PayPal Button Container initially */
        #paypal-button-container {
            display: none;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Decal -->
        <div class="decal">
            <img src="decal.png" alt="Decal">
        </div>

        <h1>My Online Shop</h1>

        <!-- Product Listing -->
        <div class="product-container">
            <div class="product">
                <img src="product1.jpg" alt="Product 1">
                <div class="info">
                    <h2>Product 1</h2>
                    <p>Description of product 1. Price: $10</p>
                    <button class="add-to-cart" data-product-name="Product 1" data-price="10">Add to Cart</button>
                </div>
            </div>

            <div class="product">
                <img src="product2.jpg" alt="Product 2">
                <div class="info">
                    <h2>Product 2</h2>
                    <p>Description of product 2. Price: $15</p>
                    <button class="add-to-cart" data-product-name="Product 2" data-price="15">Add to Cart</button>
                </div>
            </div>
        </div>

        <!-- Cart -->
        <div class="cart">
            <h2>Cart</h2>
            <ul id="cart-items">
                <!-- Cart items will be added here dynamically -->
            </ul>
            <button class="checkout-btn" onclick="showPayPalButton()">Checkout</button>
        </div>
        

        <!-- PayPal Checkout Button -->
        <div id="paypal-button-container"></div>
    </div>

    <!-- JavaScript for Cart Functionality and PayPal Checkout -->
    <script>
        var cartItems = [];
    
        document.querySelectorAll('.add-to-cart').forEach(function(button) {
            button.addEventListener('click', function() {
                var productName = this.dataset.productName;
                var price = parseFloat(this.dataset.price);
                addToCart(productName, price);
            });
        });
    
        function addToCart(productName, price) {
            cartItems.push({ name: productName, price: price });
            renderCart();
            updatePayPalButton(); // Call the function to update PayPal button after adding to cart
        }
    
        function renderCart() {
            var cartList = document.getElementById('cart-items');
            cartList.innerHTML = '';
    
            cartItems.forEach(function(item) {
                var li = document.createElement('li');
                li.textContent = item.name + ' - $' + item.price.toFixed(2);
                cartList.appendChild(li);
            });
        }
    
        function calculateTotalAmount() {
            var total = 0;
            cartItems.forEach(function(item) {
                total += item.price;
            });
            return total;
        }
    
        function updatePayPalButton() {
    var totalAmount = calculateTotalAmount();
    var paypalButtonContainer = document.getElementById('paypal-button-container');

    // Clear PayPal button container before rendering
    paypalButtonContainer.innerHTML = '';

    // Render PayPal button
    paypal.Buttons({
        style: {
            layout: 'horizontal'
        },
        createOrder: function(data, actions) {
            return actions.order.create({
                purchase_units: [{
                    amount: {
                        value: totalAmount.toFixed(2)
                    }
                }]
            });
        },
        onApprove: function(data, actions) {
            return actions.order.capture().then(function(details) {
                alert('Transaction completed by ' + details.payer.name.given_name);
                // Implement further actions after successful payment
            });
        }
    }).render('#paypal-button-container');
}
        function renderPayPalButton(totalAmount) {
            paypal.Buttons({
                style: {
                    layout: 'horizontal',
                    color: 'gold', // Customize button color
                    shape: 'rect', // Use rectangular button shape
                    label: 'pay', // Button text label
                    height: 40, // Button height
                    tagline: false // Hide PayPal tagline
                },
                createOrder: function(data, actions) {
                    return actions.order.create({
                        purchase_units: [{
                            amount: {
                                value: totalAmount.toFixed(2)
                            }
                        }]
                    });
                },
                onError: function(err) {
                    console.error('An error occurred during PayPal checkout:', err);
                    alert('An error occurred during PayPal checkout. Please try again later.');
                },
                onApprove: function(data, actions) {
                    return actions.order.capture().then(function(details) {
                        alert('Transaction completed by ' + details.payer.name.given_name);
                        // Implement further actions after successful payment
                    });
                }
            }).render('#paypal-button-container');
        }
    
        function showPayPalButton() {
            var paypalButtonContainer = document.getElementById('paypal-button-container');
            paypalButtonContainer.style.display = 'block'; // Show the PayPal button container
        }
    
        document.querySelector('.checkout-btn').addEventListener('click', showPayPalButton);
    </script>
    
</body>
</html>
